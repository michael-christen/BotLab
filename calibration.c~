#include "calibration.h"
#include "maebot_app.h" //uhh had to do this for state_t but i don't like it

static void sensor_handler (const lcm_recv_buf_t *rbuf, const char * channel, 
        const maebot_sensor_data_t * msg, void * data)
{
	//do i need to be using mutex?

 	state_t * state = data;

    printf ("Received message on channel \"%s\":\n", channel);
    printf ("  timestamp   = %d\n", msg->utime);
    printf ("  acceleration    = (%d, %d, %d)\n",
            msg->accel[0], msg->accel[1], msg->accel[2]);
    printf ("  gyro values = (%d, %d, %d)\n",
            msg->gyro[0], msg->gyro[1], msg->gyro[2]);
    printf ("  gyro_int values= (%d, %d, %d)\n",
            msg->gyro_int[0], msg->gyro_int[1], msg->gyro_int[2]);
    printf ("  line sensor values= (%d, %d, %d)\n",
            msg->line_sensors[0], msg->line_sensors[1], msg->line_sensors[2]);
	 printf	(" range value = (%d)\n", msg->range);
	//also has user_button_pressed and power_button_pressed

	 for( int i = 0; i < 3; i++){
		state->acc[i]  = msg->accel[i];
		state->gyro[i]  = msg->gyro[i];
		state->gyro_int[i]  = msg->gyro_int[i];
	 }

	return;

}
